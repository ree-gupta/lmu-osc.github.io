/*
  Open Research Cycle - Stylesheet
  Uses `orc-` prefix for namespacing.
*/

/* ========================================
   1. CSS VARIABLES
   ======================================== */

:root {
  --orc-green: var(--osc-accent);
  --orc-green-dark: #006426;
  --orc-green-darker: #004d1d;
  --orc-green-light: #f0f9f6;
  --orc-gray-100: #f1f5f9;
  --orc-gray-200: #e2e8f0;
  --orc-gray-300: var(--osc-divider);
  --orc-gray-400: #718096;
  --orc-gray-500: var(--osc-muted);
  --orc-gray-600: #4a5568;
  --orc-gray-700: var(--osc-text);
  --orc-shadow-sm: 0 1px 2px 0 rgba(0,0,0,.05);
  --orc-shadow-md: 0 4px 6px -1px rgba(0,0,0,.1), 0 2px 4px -1px rgba(0,0,0,.06);
  --orc-shadow-lg: 0 10px 15px -3px rgba(0,0,0,.1), 0 4px 6px -2px rgba(0,0,0,.05);
  --orc-transition: all .2s ease;
  --orc-radius: 10px;
  --orc-radius-lg: 12px;
  --orc-radius-full: 9999px;
}

/* ========================================
   2. BASE & LAYOUT
   ======================================== */

h2 i, h3 i { color: var(--orc-green); margin-right: .5rem; }

.orc-grid-tools {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
  gap: .75rem;
  margin: 1rem 0;
}

.orc-two-column {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 2rem;
  margin: 1.5rem 0;
}

.orc-column > h4:first-child { color: var(--orc-gray-600); }
.orc-column > h4:first-child i { color: var(--orc-green); }

/* ========================================
   3. CARDS
   ======================================== */

.orc-card, .orc-card-tool {
  background: var(--osc-bg);
  border: 1px solid var(--orc-gray-200);
  border-radius: var(--orc-radius-lg);
  padding: 1rem;
  box-shadow: var(--orc-shadow-sm);
  transition: var(--orc-transition);
}

.orc-card { padding: 1.25rem; border-color: var(--orc-gray-300); }
.orc-card-tool { position: relative; }

.orc-card:hover, .orc-card-tool:hover {
  transform: translateY(-3px);
  box-shadow: var(--orc-shadow-md);
}

.orc-card-tool:hover {
  transform: translateY(-4px);
  box-shadow: var(--orc-shadow-lg);
  border-color: transparent;
}

.orc-card-tool-icon {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 44px;
  height: 44px;
  font-size: 1.5rem;
  color: var(--orc-green);
  background: var(--orc-green-light);
  border-radius: var(--orc-radius);
  margin-bottom: .75rem;
  transition: var(--orc-transition);
}

.orc-card-tool-icon img { width: 1.5rem; height: 1.5rem; }
.orc-card-tool:hover .orc-card-tool-icon { transform: scale(1.05); }

.orc-card-tool h4 { margin: 0 0 .35rem; font-size: 1.1rem; font-weight: 600; color: var(--orc-gray-700); line-height: 1.3; }
.orc-card-tool p { font-size: 1rem; color: var(--orc-gray-400); margin-bottom: 0; line-height: 1.5; }

.orc-card-tool-badge {
  position: absolute;
  top: .75rem;
  right: .75rem;
  background: var(--orc-gray-100);
  color: var(--orc-gray-600);
  font-size: .8rem;
  padding: .3rem .7rem;
  border-radius: var(--orc-radius-full);
  font-weight: 600;
  text-decoration: none;
}

.orc-card-tool-badge:hover { opacity: .9; }
.orc-card-tool-badge.recommended { background: var(--orc-green-light); color: var(--orc-green); }

/* ========================================
   4. DETAILS PANELS
   ======================================== */

.orc-details-panel {
  margin: 1.5rem 0;
  background: #fff;
  border: 1px solid var(--orc-gray-300);
  border-radius: var(--orc-radius);
  overflow: hidden;
  transition: var(--orc-transition);
}

.orc-details-panel:hover {
  border-color: var(--orc-gray-400);
  box-shadow: var(--orc-shadow-md);
  transform: translateY(-1px);
}

.orc-details-panel[open] { box-shadow: var(--orc-shadow-md); }

.orc-details-panel summary {
  cursor: pointer;
  list-style: none;
  display: flex;
  align-items: center;
  gap: 1.25rem;
  padding: 1.25rem 1.5rem;
  background: #fff;
  color: var(--orc-gray-700);
  font-weight: 700;
  font-size: 1.35rem;
  line-height: 1.4;
  transition: color .2s;
  user-select: none;
}

.orc-details-panel summary:hover { color: var(--orc-green-dark); }
.orc-details-panel summary::-webkit-details-marker { display: none; }

.orc-details-panel summary i {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 3rem;
  height: 3rem;
  background: var(--orc-green-light);
  color: var(--orc-green-dark);
  font-size: 1.4rem;
  border-radius: var(--orc-radius);
  flex-shrink: 0;
  transition: transform .2s;
}

.orc-details-panel summary:hover i { transform: scale(1.1); }
.orc-details-panel summary i + i { display: none; }

.orc-details-panel summary::after {
  content: '';
  margin-left: auto;
  width: 2.25rem;
  height: 2.25rem;
  background: var(--orc-gray-100) url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' fill='%23646464' viewBox='0 0 16 16'%3E%3Cpath d='M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z'/%3E%3C/svg%3E") no-repeat center / 1rem;
  border-radius: 50%;
  transition: all .25s;
  flex-shrink: 0;
}

.orc-details-panel summary:hover::after { background-color: var(--orc-gray-200); transform: translateY(2px); }
.orc-details-panel[open] > summary { padding-bottom: 1rem; border-bottom: 1px solid var(--orc-gray-100); }
.orc-details-panel[open] summary::after {
  transform: rotate(180deg);
  background: var(--orc-green-light) url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' fill='%23006426' viewBox='0 0 16 16'%3E%3Cpath d='M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z'/%3E%3C/svg%3E") no-repeat center / 1rem;
}

.orc-details-panel > :not(summary) { padding: .75rem 1.5rem 1rem; }
.orc-details-panel p { margin: .2rem 0; }
.orc-details-panel > .panel-tabset { padding-top: 1rem; }

/* ========================================
   5. CALLOUTS (Quarto)
   ======================================== */

div.callout .callout-title { font-size: 1.1rem !important; font-weight: 700 !important; }
div.callout .callout-body, div.callout .callout-body :is(p, ul, li) { font-size: 1rem !important; line-height: 1.6 !important; }

div.callout-note.callout-style-simple {
  border-left: 5px solid var(--orc-green) !important;
  background: var(--orc-green-light) !important;
  border-radius: .5rem !important;
}

div.callout-note.callout-style-simple .callout-title { color: var(--orc-green) !important; }
div.callout-note.callout-style-simple .callout-icon { width: 2rem; height: 2rem; }
div.callout-note.callout-style-simple .callout-icon::before {
  content: '' !important;
  display: block;
  width: 2rem;
  height: 2rem;
  background: url("../assets/img/lmu_osc_logo.jpg") no-repeat center / contain;
  border-radius: 4px;
}
div.callout-note.callout-style-simple .callout-icon i,
div.callout-note.callout-style-simple .callout-icon .bi { display: none !important; }
details .callout { margin-top: 1rem; }

/* ========================================
   6. PANEL TABSETS (Quarto)
   ======================================== */

.panel-tabset .nav-tabs { border-bottom: 2px solid var(--orc-gray-200); }

.panel-tabset .nav-tabs .nav-link {
  color: var(--orc-gray-600);
  border: none;
  border-bottom: 3px solid transparent;
  padding: .75rem 1.25rem;
  font-weight: 500;
  transition: var(--orc-transition);
  margin-bottom: -2px;
}

.panel-tabset .nav-tabs .nav-link:hover { color: var(--orc-green); border-bottom-color: var(--orc-green-light); background: transparent; }
.panel-tabset .nav-tabs .nav-link.active { color: var(--orc-green); border-bottom-color: var(--orc-green); background: transparent; font-weight: 600; }
.panel-tabset .tab-content { padding: 1.25rem 0; margin-top: .5rem; }

/* ========================================
   7. PHASE MENU & BUTTONS
   ======================================== */

.cycle-container { text-align: center; margin: 2rem auto; max-width: 600px; }
.cycle-container svg { max-width: 100%; height: auto; }
.cycle-container em { display: block; margin-top: 1rem; font-size: .95rem; color: var(--orc-gray-500); }

.phase-menu-horizontal {
  display: flex;
  flex-wrap: wrap;
  gap: 1rem;
  justify-content: center;
  margin: 2rem auto;
  max-width: 900px;
}

.phase-btn-h {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 1.25rem .75rem;
  background: var(--osc-bg);
  border: 2px solid var(--orc-gray-200);
  border-radius: var(--orc-radius-lg);
  color: var(--orc-gray-700);
  text-decoration: none;
  transition: all .3s cubic-bezier(.4,0,.2,1);
  cursor: pointer;
  font-weight: 600;
  box-shadow: var(--orc-shadow-sm);
  width: 180px;
  height: 110px;
  text-align: center;
}

.phase-btn-h:hover {
  transform: translateY(-5px);
  box-shadow: 0 8px 16px rgba(0,136,58,.15);
  border-color: var(--orc-green);
  background: var(--orc-green-light);
}

.phase-btn-h:focus { outline: none; box-shadow: 0 0 0 3px rgba(0,136,58,.3); }
.phase-btn-h i { font-size: 1.75rem; margin-bottom: .5rem; color: var(--orc-green); transition: transform .3s; }
.phase-btn-h:hover i { transform: scale(1.15); }
.phase-btn-h span { line-height: 1.3; }

/* ========================================
   8. SVG DIAGRAM
   ======================================== */

svg a { text-decoration: none; cursor: pointer; }

.phase-group {
  cursor: pointer;
  transition: all .4s cubic-bezier(.25,.1,.25,1);
  transform-origin: 1645px 477px;
}

.phase-group:hover { filter: brightness(1.1) drop-shadow(0 0 8px rgba(0,136,58,.5)); transform: scale(1.02); }
.phase-group:hover path { stroke: white; stroke-width: 2px; stroke-opacity: .7; }
svg:has(.phase-group:hover) .phase-group:not(:hover) { opacity: .6; filter: brightness(.95); }
.phase-group:active { transform: scale(.98); }
.phase-group:focus { outline: none; filter: drop-shadow(0 0 8px rgba(0,136,58,.6)); }
svg :is(text, tspan) { font-family: inherit !important; font-weight: bold; pointer-events: none; }

/* ========================================
   9. BOOTSTRAP MODALS
   ======================================== */

[id^="modalPhase"] .modal-header { background: var(--orc-green); color: white; border-bottom: none; }
[id^="modalPhase"] .modal-title { font-weight: 700; }
[id^="modalPhase"] .btn-close { filter: invert(1) grayscale(100%) brightness(200%); opacity: .8; }
[id^="modalPhase"] .btn-close:hover { opacity: 1; }
[id^="modalPhase"] .modal-body { padding: 2rem; font-size: 1.1rem; line-height: 1.6; color: var(--orc-gray-600); }
[id^="modalPhase"] .modal-footer { border-top: 1px solid var(--orc-gray-200); padding: 1rem 2rem; }
[id^="modalPhase"] .modal-footer .btn-primary { background: var(--orc-green-dark); border-color: var(--orc-green-dark); padding: .5rem 1.5rem; font-weight: 600; }
[id^="modalPhase"] .modal-footer .btn-primary:hover { background: var(--orc-green-darker); border-color: var(--orc-green-darker); }

/* ========================================
   10. PHASE HERO
   ======================================== */

.orc-hero-cycle[class*="phase-"] [id^="phase-"] { opacity: .25; }
.orc-hero-cycle.phase-1 #phase-1,
.orc-hero-cycle.phase-2 #phase-2,
.orc-hero-cycle.phase-3 #phase-3,
.orc-hero-cycle.phase-4 #phase-4 { opacity: 1; }

.orc-phase-hero-compact {
  display: flex;
  align-items: center;
  gap: 2.5rem;
  padding: 2rem 2.5rem;
  margin-bottom: 3rem;
  background: var(--orc-green);
  border-radius: 16px;
  color: white;
  box-shadow: 0 4px 20px rgba(0,100,38,.25);
}

.orc-phase-hero-compact .orc-hero-cycle { width: 210px; height: 210px; flex-shrink: 0; }
.orc-phase-hero-compact .orc-hero-cycle svg { width: 100%; height: 100%; }
.orc-phase-hero-compact .orc-hero-body { flex: 1; display: flex; flex-direction: column; gap: .75rem; }
.orc-phase-hero-compact h2 { margin: 0; font-size: 2.5rem; font-weight: 700; color: white !important; border-bottom: none; line-height: 1.2; }
.orc-hero-tagline { margin: 0; font-size: 1.5rem; font-weight: 500; }
.orc-phase-hero-compact .orc-hero-pills { display: flex; flex-wrap: wrap; gap: .75rem 2rem; }
.orc-phase-hero-compact .orc-hero-pills span {
  display: inline-flex;
  align-items: center;
  gap: .75rem;
  padding: .6rem 1.25rem;
  background: rgba(255,255,255,.15);
  border-radius: var(--orc-radius-full);
  font-size: 1.1rem;
  font-weight: 500;
}
.orc-phase-hero-compact .orc-hero-pills span i { color: #7ddf7d; font-size: 1.2rem; }
.orc-phase-hero-compact .orc-hero-checkpoint {
  display: inline-flex;
  align-items: center;
  gap: .5rem;
  padding: .4rem 1rem;
  background: rgba(255,255,255,.25);
  border-radius: var(--orc-radius-full);
  font-size: .8rem;
  font-weight: 600;
  margin-top: .25rem;
  width: fit-content;
}
.orc-phase-hero-compact .orc-hero-checkpoint i { font-size: .8rem; }

/* ========================================
   11. RESPONSIVE
   ======================================== */

@media (min-width: 1200px) {
  .orc-grid-tools { grid-template-columns: repeat(auto-fill, minmax(240px, 1fr)); }
}

@media (max-width: 768px) {
  .orc-phase-hero-compact { flex-direction: column; text-align: center; padding: 1.5rem; }
  .orc-phase-hero-compact .orc-hero-pills { justify-content: center; }
  .orc-phase-hero-compact .orc-hero-checkpoint { margin: .5rem auto 0; }
}

@media (max-width: 600px) {
  .orc-two-column { grid-template-columns: 1fr; }
  .phase-menu-horizontal { flex-direction: column; align-items: center; }
  .phase-btn-h { width: 100%; max-width: 300px; flex-direction: row; justify-content: flex-start; padding: 1rem 1.5rem; height: auto; }
  .phase-btn-h i { margin-bottom: 0; margin-right: 1rem; font-size: 1.5rem; }
}
